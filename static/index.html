<!DOCTYPE html>
<html>
<head>
<title>Personal Server</title>
</head>
<body>
<h1>Personal Server</h1>
<input type="text" placeholder="Enter URL" id="url" />
<input type="text" placeholder="File Extension" id="ext" value="jpg" />
<button id="submit">Submit</button>
<script type="text/javascript">
$ = document.getElementById.bind(document);
function handler(ev) {
    var url = $('url').value;
    if (!url.match(/^[a-zA-Z]+:\/\//)) {
        url = 'http://' + url;
    }
    var ext = $('ext').value;
    var b64 = btoa(url).replace(/\+/g, '-').replace(/\//, '_');
    var newurl = '/do/' + b64 + '/get.' + ext;
    window.location = newurl;
    (ev || window.event).preventDefault();
}
function pressOnEnter(ev) {
    ev = ev || window.event;
    if ((ev.which || ev.keyCode || 0) == 13)
        $('submit').click();
}
$('submit').addEventListener('click', handler);
$('url').addEventListener('keydown', pressOnEnter);
$('ext').addEventListener('keydown', pressOnEnter);
</script>
</body>
</html>
